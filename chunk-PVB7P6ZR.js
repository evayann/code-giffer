import{b as j}from"./chunk-GNVIZY74.js";import{a as x,b as L,c as k}from"./chunk-MAK7QB56.js";import{Ba as d,Ca as u,Ea as v,I,Ja as h,Na as S,Oa as D,P as p,Pa as T,T as g,U as y,da as H,e as A,eb as f,fa as E,ga as l,ia as _,ja as w,mb as V,oa as m,ra as F,sa as b,wa as r,xa as s,za as M}from"./chunk-7P35LDXJ.js";import"./chunk-VHCA6YAO.js";var B=["codeContainer"],W=(()=>{let t=class t{set codeAnimation(e){this._codeAnimation=e,this.codeConfiguration={numberRow:e.nbMaxRow,numberColumn:64,isEditable:!0,hideTextSelection:!0}}constructor(e){this.changeDetectorReference=e,this.delayInMs=100,this.onRecordFinish=new w,this.code="",this.codeChangeFromAnimation$=new A}ngAfterViewInit(){this.saveCodeAnimation()}domHasChange(){this._codeAnimation.hasStart&&this.codeChangeFromAnimation$.next()}saveCodeAnimation(){this._codeAnimation.hasNoFrame||L.generate({animation:this._codeAnimation,width:this.codeContainer.nativeElement.clientWidth,height:this.codeContainer.nativeElement.clientHeight,dom:this.codeContainer.nativeElement,scaleFactor:2,frameLoaded:this.codeChangeFromAnimation$.asObservable(),frameOptions:{delayInMs:this.delayInMs},loadFrame:e=>{if(this.isAlreadyLoad(e)){this.codeChangeFromAnimation$.next();return}this.code=e.code,this.changeDetectorReference.detectChanges()},onFinish:()=>{this.codeConfiguration.hideTextSelection=!1,this.changeDetectorReference.detectChanges(),this.onRecordFinish.emit(null)}})}isAlreadyLoad(e){return this.code===e.code}};t.\u0275fac=function(n){return new(n||t)(l(_))},t.\u0275cmp=p({type:t,selectors:[["app-code-recorder"]],viewQuery:function(n,a){if(n&1&&D(B,5,H),n&2){let c;S(c=T())&&(a.codeContainer=c.first)}},inputs:{title:"title",delayInMs:"delayInMs",theme:"theme",codeAnimation:"codeAnimation"},outputs:{onRecordFinish:"onRecordFinish"},standalone:!0,features:[h],decls:5,vars:4,consts:[[1,"stack-child","code-editor"],[3,"title","code","theme","windowConfiguration","domHasChange"],["codeContainer",""],[1,"spinner"]],template:function(n,a){n&1&&(r(0,"div",0)(1,"app-window",1,2),d("domHasChange",function(){return a.domHasChange()}),s(),r(3,"p",3),v(4," Render frames "),s()()),n&2&&(E(),m("title",a.title)("code",a.code)("theme",a.theme)("windowConfiguration",a.codeConfiguration))},dependencies:[f,x],styles:[".spinner[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;color:var(--text-background);background-color:var(--background);width:100%;z-index:1000}"],changeDetection:0});let o=t;return o})();function G(o,t){if(o&1){let i=M();r(0,"app-window",2),d("titleChange",function(n){g(i);let a=u();return y(a.title=n)})("codeHasChange",function(n){g(i);let a=u();return y(a.updateCode(n.value))}),s()}if(o&2){let i=u();m("code",i.code)("title",i.title)("theme",i.theme)("windowConfiguration",i.codeConfiguration)}}function q(o,t){if(o&1){let i=M();r(0,"app-code-recorder",3),d("onRecordFinish",function(){g(i);let n=u();return y(n.finishRecord())}),s()}if(o&2){let i=u();m("delayInMs",i.delayInMs)("title",i.title)("theme",i.theme)("codeAnimation",i.codeAnimation)}}var O=(()=>{let t=class t{constructor(){this.codeHasChange=new w,this.title="Snippet title",this.code="",this.isRecording=!1,this.codeConfiguration={numberRow:1,numberColumn:64,isEditable:!0,hideTextSelection:!1}}set initialCode(e){this.title=e.title,this.code=e.code}updateCode(e){this.code=e,this.codeHasChange.emit(e)}startRecord(){this.codeAnimation=k.fromCode(this.code),this.isRecording=!0}finishRecord(){this.isRecording=!1}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=p({type:t,selectors:[["app-auto-code-editor"]],inputs:{delayInMs:"delayInMs",theme:"theme",initialCode:"initialCode"},outputs:{codeHasChange:"codeHasChange"},standalone:!0,features:[h],decls:4,vars:1,consts:[[3,"code","title","theme","windowConfiguration"],[3,"click"],[3,"code","title","theme","windowConfiguration","titleChange","codeHasChange"],[3,"delayInMs","title","theme","codeAnimation","onRecordFinish"]],template:function(n,a){n&1&&(F(0,G,1,4,"app-window",0)(1,q,1,4),r(2,"button",1),d("click",function(){return a.startRecord()}),v(3," Animate my snippet ! "),s()),n&2&&b(0,a.isRecording?1:0)},dependencies:[f,x,W],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:var(--space-3)}"],changeDetection:0});let o=t;return o})();var C=class{static crypt(t){return t.split("").map(i=>i.split("").map(e=>e.charCodeAt(0))).map(i=>("0"+Number(i).toString(16)).substr(-2)).join("")}static uncrypt(t){return t.match(/.{1,2}/g)?.map(i=>parseInt(i,16)).map(i=>String.fromCharCode(i)).join("")??""}};var P=[{title:"Hello World",frameList:["","<p> </p>","<p> H </p>","<p> He </p>","<p> Hel </p>","<p> Hell </p>","<p> Hello </p>","<p> Hello  </p>","<p> Hello W </p>","<p> Hello Wo </p>","<p> Hello Wor </p>","<p> Hello Worl </p>","<p> Hello World </p>"]}];var U=[{title:"Hello World",frameList:["","function","function d","function di","function dis","function disp","function displ","function display","function display()","function display() {}",`function display() {

}`,`function display() {
	c
}`,`function display() {
	co
}`,`function display() {
	con
}`,`function display() {
	cons
}`,`function display() {
	conso
}`,`function display() {
	consol
}`,`function display() {
	console
}`,`function display() {
	console.
}`,`function display() {
	console.
}`,`function display() {
	console.lo
}`,`function display() {
	console.log
}`,`function display() {
	console.log
}`,`function display() {
	console.log(); 
}`,`function display() {
	console.log('hello world'); 
}`]}];var $=["html","javascript"];var K={html:P,javascript:U},Q=(()=>{let t=class t{getRandomExample(e){let n=this.getRandomExampleAnimation(e);return{title:n.title,code:n.frameList.at(-1)}}getRandomExampleAnimation(e){return e==="auto"&&(e=this.randomIn($)),this.randomIn(K[e])}randomIn(e){let n=Math.floor(Math.random()*e.length);return e.at(n)}};t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=I({token:t,factory:t.\u0275fac,providedIn:"root"});let o=t;return o})();var Te=(()=>{let t=class t{set title(e){this._codeTitle=e,this.loadUrlCode()}set code(e){this._codeContent=C.uncrypt(e),this.loadUrlCode()}set menuForm(e){this._menuForm=e,e?.valueChanges.subscribe(()=>this.changeDetectorRef.detectChanges())}get theme(){return{background:this.getMenuValue("hasBackground")?"var(--gradient)":"transparent",padding:this.getMenuValue("hasPadding")?"var(--padding-5)":"0",codeSyntaxThemeName:"androidstudio",titleColor:"white",caretColor:"white"}}get delayInMs(){return this.getMenuValue("intervalBetweenFrameInMs")}constructor(e,n,a,c){this.changeDetectorRef=c,e.setTheme("//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/androidstudio.min.css"),this.initialCode=n.getRandomExample("auto")}loadUrlCode(){!this._codeTitle||!this._codeContent||(this.initialCode={title:this._codeTitle,code:this._codeContent})}onUpdateUrl(e){console.log(e),window.history.replaceState({},"",`/auto?title=test&code=${C.crypt(e)}`)}getMenuValue(e){return this._menuForm?.get(e)?.value}};t.\u0275fac=function(n){return new(n||t)(l(V),l(Q),l(j),l(_))},t.\u0275cmp=p({type:t,selectors:[["app-auto-code-to-gif-page"]],inputs:{title:"title",code:"code",menuForm:"menuForm"},standalone:!0,features:[h],decls:1,vars:3,consts:[[3,"delayInMs","theme","initialCode","codeHasChange"]],template:function(n,a){n&1&&(r(0,"app-auto-code-editor",0),d("codeHasChange",function(N){return a.onUpdateUrl(N)}),s()),n&2&&m("delayInMs",a.delayInMs)("theme",a.theme)("initialCode",a.initialCode)},dependencies:[f,O],styles:["[_nghost-%COMP%]{display:flex;align-items:center;justify-content:center}app-menu[_ngcontent-%COMP%]{position:absolute;top:var(--space-5);right:var(--space-5)}app-auto-code-editor[_ngcontent-%COMP%]{padding:calc(var(--space-5) * 2) 0}"],changeDetection:0});let o=t;return o})();export{Te as AutoCodeToGifPageComponent};
