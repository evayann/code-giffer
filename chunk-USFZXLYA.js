import{$ as Ve,Aa as de,B as we,Ba as se,Ca as Xe,Da as Ze,E as We,Fa as le,G as ae,Ha as me,I as je,K as re,L as ie,Ma as Je,Na as Ke,Pa as Ye,X as xe,Ya as be,Z as J,_ as ye,_a as ce,aa as Y,c as ze,db as et,e as Ge,ea as Ne,fa as ee,ga as Qe,ja as $e,ka as qe,kb as tt,oa as te,pa as K,qa as Ce,ta as _e,wa as ne,xa as oe}from"./chunk-65EFT5QU.js";import{a as He,c as ge,d as Re}from"./chunk-VHCA6YAO.js";var St=ge((zt,Ee)=>{"use strict";var Le=function(){var t=String.fromCharCode,e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",s={};function i(u,d){if(!s[u]){s[u]={};for(var b=0;b<u.length;b++)s[u][u.charAt(b)]=b}return s[u][d]}var f={compressToBase64:function(u){if(u==null)return"";var d=f._compress(u,6,function(b){return e.charAt(b)});switch(d.length%4){default:case 0:return d;case 1:return d+"===";case 2:return d+"==";case 3:return d+"="}},decompressFromBase64:function(u){return u==null?"":u==""?null:f._decompress(u.length,32,function(d){return i(e,u.charAt(d))})},compressToUTF16:function(u){return u==null?"":f._compress(u,15,function(d){return t(d+32)})+" "},decompressFromUTF16:function(u){return u==null?"":u==""?null:f._decompress(u.length,16384,function(d){return u.charCodeAt(d)-32})},compressToUint8Array:function(u){for(var d=f.compress(u),b=new Uint8Array(d.length*2),g=0,E=d.length;g<E;g++){var D=d.charCodeAt(g);b[g*2]=D>>>8,b[g*2+1]=D%256}return b},decompressFromUint8Array:function(u){if(u==null)return f.decompress(u);for(var d=new Array(u.length/2),b=0,g=d.length;b<g;b++)d[b]=u[b*2]*256+u[b*2+1];var E=[];return d.forEach(function(D){E.push(t(D))}),f.decompress(E.join(""))},compressToEncodedURIComponent:function(u){return u==null?"":f._compress(u,6,function(d){return x.charAt(d)})},decompressFromEncodedURIComponent:function(u){return u==null?"":u==""?null:(u=u.replace(/ /g,"+"),f._decompress(u.length,32,function(d){return i(x,u.charAt(d))}))},compress:function(u){return f._compress(u,16,function(d){return t(d)})},_compress:function(u,d,b){if(u==null)return"";var g,E,D={},z={},H="",G="",R="",M=2,T=3,S=2,I=[],w=0,m=0,C;for(C=0;C<u.length;C+=1)if(H=u.charAt(C),Object.prototype.hasOwnProperty.call(D,H)||(D[H]=T++,z[H]=!0),G=R+H,Object.prototype.hasOwnProperty.call(D,G))R=G;else{if(Object.prototype.hasOwnProperty.call(z,R)){if(R.charCodeAt(0)<256){for(g=0;g<S;g++)w=w<<1,m==d-1?(m=0,I.push(b(w)),w=0):m++;for(E=R.charCodeAt(0),g=0;g<8;g++)w=w<<1|E&1,m==d-1?(m=0,I.push(b(w)),w=0):m++,E=E>>1}else{for(E=1,g=0;g<S;g++)w=w<<1|E,m==d-1?(m=0,I.push(b(w)),w=0):m++,E=0;for(E=R.charCodeAt(0),g=0;g<16;g++)w=w<<1|E&1,m==d-1?(m=0,I.push(b(w)),w=0):m++,E=E>>1}M--,M==0&&(M=Math.pow(2,S),S++),delete z[R]}else for(E=D[R],g=0;g<S;g++)w=w<<1|E&1,m==d-1?(m=0,I.push(b(w)),w=0):m++,E=E>>1;M--,M==0&&(M=Math.pow(2,S),S++),D[G]=T++,R=String(H)}if(R!==""){if(Object.prototype.hasOwnProperty.call(z,R)){if(R.charCodeAt(0)<256){for(g=0;g<S;g++)w=w<<1,m==d-1?(m=0,I.push(b(w)),w=0):m++;for(E=R.charCodeAt(0),g=0;g<8;g++)w=w<<1|E&1,m==d-1?(m=0,I.push(b(w)),w=0):m++,E=E>>1}else{for(E=1,g=0;g<S;g++)w=w<<1|E,m==d-1?(m=0,I.push(b(w)),w=0):m++,E=0;for(E=R.charCodeAt(0),g=0;g<16;g++)w=w<<1|E&1,m==d-1?(m=0,I.push(b(w)),w=0):m++,E=E>>1}M--,M==0&&(M=Math.pow(2,S),S++),delete z[R]}else for(E=D[R],g=0;g<S;g++)w=w<<1|E&1,m==d-1?(m=0,I.push(b(w)),w=0):m++,E=E>>1;M--,M==0&&(M=Math.pow(2,S),S++)}for(E=2,g=0;g<S;g++)w=w<<1|E&1,m==d-1?(m=0,I.push(b(w)),w=0):m++,E=E>>1;for(;;)if(w=w<<1,m==d-1){I.push(b(w));break}else m++;return I.join("")},decompress:function(u){return u==null?"":u==""?null:f._decompress(u.length,32768,function(d){return u.charCodeAt(d)})},_decompress:function(u,d,b){var g=[],E,D=4,z=4,H=3,G="",R=[],M,T,S,I,w,m,C,c={val:b(0),position:d,index:1};for(M=0;M<3;M+=1)g[M]=M;for(S=0,w=Math.pow(2,2),m=1;m!=w;)I=c.val&c.position,c.position>>=1,c.position==0&&(c.position=d,c.val=b(c.index++)),S|=(I>0?1:0)*m,m<<=1;switch(E=S){case 0:for(S=0,w=Math.pow(2,8),m=1;m!=w;)I=c.val&c.position,c.position>>=1,c.position==0&&(c.position=d,c.val=b(c.index++)),S|=(I>0?1:0)*m,m<<=1;C=t(S);break;case 1:for(S=0,w=Math.pow(2,16),m=1;m!=w;)I=c.val&c.position,c.position>>=1,c.position==0&&(c.position=d,c.val=b(c.index++)),S|=(I>0?1:0)*m,m<<=1;C=t(S);break;case 2:return""}for(g[3]=C,T=C,R.push(C);;){if(c.index>u)return"";for(S=0,w=Math.pow(2,H),m=1;m!=w;)I=c.val&c.position,c.position>>=1,c.position==0&&(c.position=d,c.val=b(c.index++)),S|=(I>0?1:0)*m,m<<=1;switch(C=S){case 0:for(S=0,w=Math.pow(2,8),m=1;m!=w;)I=c.val&c.position,c.position>>=1,c.position==0&&(c.position=d,c.val=b(c.index++)),S|=(I>0?1:0)*m,m<<=1;g[z++]=t(S),C=z-1,D--;break;case 1:for(S=0,w=Math.pow(2,16),m=1;m!=w;)I=c.val&c.position,c.position>>=1,c.position==0&&(c.position=d,c.val=b(c.index++)),S|=(I>0?1:0)*m,m<<=1;g[z++]=t(S),C=z-1,D--;break;case 2:return R.join("")}if(D==0&&(D=Math.pow(2,H),H++),g[C])G=g[C];else if(C===z)G=T+T.charAt(0);else return null;R.push(G),g[z++]=T+G.charAt(0),D--,T=G,D==0&&(D=Math.pow(2,H),H++)}}};return f}();typeof define=="function"&&define.amd?define(function(){return Le}):typeof Ee<"u"&&Ee!=null?Ee.exports=Le:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return Le})});var ct=ge((lt,Be)=>{"use strict";(function(t){"use strict";var e=S(),x=I(),s=w(),i=m(),f={imagePlaceholder:void 0,cacheBust:!1},u={toSvg:d,toPng:g,toJpeg:E,toBlob:D,toPixelData:b,impl:{fontFaces:s,images:i,util:e,inliner:x,options:{}}};typeof Be<"u"?Be.exports=u:t.domtoimage=u;function d(C,c){return c=c||{},z(c),Promise.resolve(C).then(function(a){return G(a,c.filter,!0)}).then(R).then(M).then(A).then(function(a){return T(a,c.width||e.width(C),c.height||e.height(C))});function A(a){return c.bgcolor&&(a.style.backgroundColor=c.bgcolor),c.width&&(a.style.width=c.width+"px"),c.height&&(a.style.height=c.height+"px"),c.style&&Object.keys(c.style).forEach(function(o){a.style[o]=c.style[o]}),a}}function b(C,c){return H(C,c||{}).then(function(A){return A.getContext("2d").getImageData(0,0,e.width(C),e.height(C)).data})}function g(C,c){return H(C,c||{}).then(function(A){return A.toDataURL()})}function E(C,c){return c=c||{},H(C,c).then(function(A){return A.toDataURL("image/jpeg",c.quality||1)})}function D(C,c){return H(C,c||{}).then(e.canvasToBlob)}function z(C){typeof C.imagePlaceholder>"u"?u.impl.options.imagePlaceholder=f.imagePlaceholder:u.impl.options.imagePlaceholder=C.imagePlaceholder,typeof C.cacheBust>"u"?u.impl.options.cacheBust=f.cacheBust:u.impl.options.cacheBust=C.cacheBust}function H(C,c){return d(C,c).then(e.makeImage).then(e.delay(100)).then(function(a){var o=A(C);return o.getContext("2d").drawImage(a,0,0),o});function A(a){var o=document.createElement("canvas");if(o.width=c.width||e.width(a),o.height=c.height||e.height(a),c.bgcolor){var n=o.getContext("2d");n.fillStyle=c.bgcolor,n.fillRect(0,0,o.width,o.height)}return o}}function G(C,c,A){if(!A&&c&&!c(C))return Promise.resolve();return Promise.resolve(C).then(a).then(function(r){return o(C,r,c)}).then(function(r){return n(C,r)});function a(r){return r instanceof HTMLCanvasElement?e.makeImage(r.toDataURL()):r.cloneNode(!1)}function o(r,l,p){var v=r.childNodes;if(v.length===0)return Promise.resolve(l);return h(l,e.asArray(v),p).then(function(){return l});function h(k,y,F){var O=Promise.resolve();return y.forEach(function(L){O=O.then(function(){return G(L,F)}).then(function(j){j&&k.appendChild(j)})}),O}}function n(r,l){if(!(l instanceof Element))return l;return Promise.resolve().then(p).then(v).then(h).then(k).then(function(){return l});function p(){y(window.getComputedStyle(r),l.style);function y(F,O){F.cssText?O.cssText=F.cssText:L(F,O);function L(j,V){e.asArray(j).forEach(function(_){V.setProperty(_,j.getPropertyValue(_),j.getPropertyPriority(_))})}}}function v(){[":before",":after"].forEach(function(F){y(F)});function y(F){var O=window.getComputedStyle(r,F),L=O.getPropertyValue("content");if(L===""||L==="none")return;var j=e.uid();l.className=l.className+" "+j;var V=document.createElement("style");V.appendChild(_(j,F,O)),l.appendChild(V);function _(P,U,B){var W="."+P+":"+U,N=B.cssText?$(B):X(B);return document.createTextNode(W+"{"+N+"}");function $(q){var Q=q.getPropertyValue("content");return q.cssText+" content: "+Q+";"}function X(q){return e.asArray(q).map(Q).join("; ")+";";function Q(Z){return Z+": "+q.getPropertyValue(Z)+(q.getPropertyPriority(Z)?" !important":"")}}}}}function h(){r instanceof HTMLTextAreaElement&&(l.innerHTML=r.value),r instanceof HTMLInputElement&&l.setAttribute("value",r.value)}function k(){l instanceof SVGElement&&(l.setAttribute("xmlns","http://www.w3.org/2000/svg"),l instanceof SVGRectElement&&["width","height"].forEach(function(y){var F=l.getAttribute(y);F&&l.style.setProperty(y,F)}))}}}function R(C){return s.resolveAll().then(function(c){var A=document.createElement("style");return C.appendChild(A),A.appendChild(document.createTextNode(c)),C})}function M(C){return i.inlineAll(C).then(function(){return C})}function T(C,c,A){return Promise.resolve(C).then(function(a){return a.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(a)}).then(e.escapeXhtml).then(function(a){return'<foreignObject x="0" y="0" width="100%" height="100%">'+a+"</foreignObject>"}).then(function(a){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+c+'" height="'+A+'">'+a+"</svg>"}).then(function(a){return"data:image/svg+xml;charset=utf-8,"+a})}function S(){return{escape:k,parseExtension:c,mimeType:A,dataAsUrl:h,isDataUrl:a,canvasToBlob:n,resolveUrl:r,getAndEncode:v,uid:l(),delay:y,asArray:F,escapeXhtml:O,makeImage:p,width:L,height:j};function C(){var _="application/font-woff",P="image/jpeg";return{woff:_,woff2:_,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:P,jpeg:P,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}function c(_){var P=/\.([^\.\/]*?)$/g.exec(_);return P?P[1]:""}function A(_){var P=c(_).toLowerCase();return C()[P]||""}function a(_){return _.search(/^(data:)/)!==-1}function o(_){return new Promise(function(P){for(var U=window.atob(_.toDataURL().split(",")[1]),B=U.length,W=new Uint8Array(B),N=0;N<B;N++)W[N]=U.charCodeAt(N);P(new Blob([W],{type:"image/png"}))})}function n(_){return _.toBlob?new Promise(function(P){_.toBlob(P)}):o(_)}function r(_,P){var U=document.implementation.createHTMLDocument(),B=U.createElement("base");U.head.appendChild(B);var W=U.createElement("a");return U.body.appendChild(W),B.href=P,W.href=_,W.href}function l(){var _=0;return function(){return"u"+P()+_++;function P(){return("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)}}}function p(_){return new Promise(function(P,U){var B=new Image;B.onload=function(){P(B)},B.onerror=U,B.src=_})}function v(_){var P=3e4;return u.impl.options.cacheBust&&(_+=(/\?/.test(_)?"&":"?")+new Date().getTime()),new Promise(function(U){var B=new XMLHttpRequest;B.onreadystatechange=$,B.ontimeout=X,B.responseType="blob",B.timeout=P,B.open("GET",_,!0),B.send();var W;if(u.impl.options.imagePlaceholder){var N=u.impl.options.imagePlaceholder.split(/,/);N&&N[1]&&(W=N[1])}function $(){if(B.readyState===4){if(B.status!==200){W?U(W):q("cannot fetch resource: "+_+", status: "+B.status);return}var Q=new FileReader;Q.onloadend=function(){var Z=Q.result.split(/,/)[1];U(Z)},Q.readAsDataURL(B.response)}}function X(){W?U(W):q("timeout of "+P+"ms occured while fetching resource: "+_)}function q(Q){console.error(Q),U("")}})}function h(_,P){return"data:"+P+";base64,"+_}function k(_){return _.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")}function y(_){return function(P){return new Promise(function(U){setTimeout(function(){U(P)},_)})}}function F(_){for(var P=[],U=_.length,B=0;B<U;B++)P.push(_[B]);return P}function O(_){return _.replace(/#/g,"%23").replace(/\n/g,"%0A")}function L(_){var P=V(_,"border-left-width"),U=V(_,"border-right-width");return _.scrollWidth+P+U}function j(_){var P=V(_,"border-top-width"),U=V(_,"border-bottom-width");return _.scrollHeight+P+U}function V(_,P){var U=window.getComputedStyle(_).getPropertyValue(P);return parseFloat(U.replace("px",""))}}function I(){var C=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:o,shouldProcess:c,impl:{readUrls:A,inline:a}};function c(n){return n.search(C)!==-1}function A(n){for(var r=[],l;(l=C.exec(n))!==null;)r.push(l[1]);return r.filter(function(p){return!e.isDataUrl(p)})}function a(n,r,l,p){return Promise.resolve(r).then(function(h){return l?e.resolveUrl(h,l):h}).then(p||e.getAndEncode).then(function(h){return e.dataAsUrl(h,e.mimeType(r))}).then(function(h){return n.replace(v(r),"$1"+h+"$3")});function v(h){return new RegExp(`(url\\(['"]?)(`+e.escape(h)+`)(['"]?\\))`,"g")}}function o(n,r,l){if(p())return Promise.resolve(n);return Promise.resolve(n).then(A).then(function(v){var h=Promise.resolve(n);return v.forEach(function(k){h=h.then(function(y){return a(y,k,r,l)})}),h});function p(){return!c(n)}}}function w(){return{resolveAll:C,impl:{readAll:c}};function C(){return c(document).then(function(A){return Promise.all(A.map(function(a){return a.resolve()}))}).then(function(A){return A.join(`
`)})}function c(){return Promise.resolve(e.asArray(document.styleSheets)).then(a).then(A).then(function(n){return n.map(o)});function A(n){return n.filter(function(r){return r.type===CSSRule.FONT_FACE_RULE}).filter(function(r){return x.shouldProcess(r.style.getPropertyValue("src"))})}function a(n){var r=[];return n.forEach(function(l){try{e.asArray(l.cssRules||[]).forEach(r.push.bind(r))}catch(p){console.log("Error while reading CSS rules from "+l.href,p.toString())}}),r}function o(n){return{resolve:function(){var l=(n.parentStyleSheet||{}).href;return x.inlineAll(n.cssText,l)},src:function(){return n.style.getPropertyValue("src")}}}}}function m(){return{inlineAll:c,impl:{newImage:C}};function C(A){return{inline:a};function a(o){return e.isDataUrl(A.src)?Promise.resolve():Promise.resolve(A.src).then(o||e.getAndEncode).then(function(n){return e.dataAsUrl(n,e.mimeType(A.src))}).then(function(n){return new Promise(function(r,l){A.onload=r,A.onerror=l,A.src=n})})}}function c(A){if(!(A instanceof Element))return Promise.resolve(A);return a(A).then(function(){return A instanceof HTMLImageElement?C(A).inline():Promise.all(e.asArray(A.childNodes).map(function(o){return c(o)}))});function a(o){var n=o.style.getPropertyValue("background");return n?x.inlineAll(n).then(function(r){o.style.setProperty("background",r,o.style.getPropertyPriority("background"))}).then(function(){return o}):Promise.resolve(o)}}}})(lt)});var ut=ge(Ue=>{"use strict";function Lt(t,e,x,f){var i=0,f=f===void 0?{}:f,u=f.loop===void 0?null:f.loop,d=f.palette===void 0?null:f.palette;if(e<=0||x<=0||e>65535||x>65535)throw new Error("Width/Height invalid.");function b(M){var T=M.length;if(T<2||T>256||T&T-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return T}t[i++]=71,t[i++]=73,t[i++]=70,t[i++]=56,t[i++]=57,t[i++]=97;var g=0,E=0;if(d!==null){for(var D=b(d);D>>=1;)++g;if(D=1<<g,--g,f.background!==void 0){if(E=f.background,E>=D)throw new Error("Background index out of range.");if(E===0)throw new Error("Background index explicitly passed as 0.")}}if(t[i++]=e&255,t[i++]=e>>8&255,t[i++]=x&255,t[i++]=x>>8&255,t[i++]=(d!==null?128:0)|g,t[i++]=E,t[i++]=0,d!==null)for(var z=0,H=d.length;z<H;++z){var G=d[z];t[i++]=G>>16&255,t[i++]=G>>8&255,t[i++]=G&255}if(u!==null){if(u<0||u>65535)throw new Error("Loop count invalid.");t[i++]=33,t[i++]=255,t[i++]=11,t[i++]=78,t[i++]=69,t[i++]=84,t[i++]=83,t[i++]=67,t[i++]=65,t[i++]=80,t[i++]=69,t[i++]=50,t[i++]=46,t[i++]=48,t[i++]=3,t[i++]=1,t[i++]=u&255,t[i++]=u>>8&255,t[i++]=0}var R=!1;this.addFrame=function(M,T,S,I,w,m){if(R===!0&&(--i,R=!1),m=m===void 0?{}:m,M<0||T<0||M>65535||T>65535)throw new Error("x/y invalid.");if(S<=0||I<=0||S>65535||I>65535)throw new Error("Width/Height invalid.");if(w.length<S*I)throw new Error("Not enough pixels for the frame size.");var C=!0,c=m.palette;if(c==null&&(C=!1,c=d),c==null)throw new Error("Must supply either a local or global palette.");for(var A=b(c),a=0;A>>=1;)++a;A=1<<a;var o=m.delay===void 0?0:m.delay,n=m.disposal===void 0?0:m.disposal;if(n<0||n>3)throw new Error("Disposal out of range.");var r=!1,l=0;if(m.transparent!==void 0&&m.transparent!==null&&(r=!0,l=m.transparent,l<0||l>=A))throw new Error("Transparent color index.");if((n!==0||r||o!==0)&&(t[i++]=33,t[i++]=249,t[i++]=4,t[i++]=n<<2|(r===!0?1:0),t[i++]=o&255,t[i++]=o>>8&255,t[i++]=l,t[i++]=0),t[i++]=44,t[i++]=M&255,t[i++]=M>>8&255,t[i++]=T&255,t[i++]=T>>8&255,t[i++]=S&255,t[i++]=S>>8&255,t[i++]=I&255,t[i++]=I>>8&255,t[i++]=C===!0?128|a-1:0,C===!0)for(var p=0,v=c.length;p<v;++p){var h=c[p];t[i++]=h>>16&255,t[i++]=h>>8&255,t[i++]=h&255}return i=Bt(t,i,a<2?2:a,w),i},this.end=function(){return R===!1&&(t[i++]=59,R=!0),i},this.getOutputBuffer=function(){return t},this.setOutputBuffer=function(M){t=M},this.getOutputBufferPosition=function(){return i},this.setOutputBufferPosition=function(M){i=M}}function Bt(t,e,x,s){t[e++]=x;var i=e++,f=1<<x,u=f-1,d=f+1,b=d+1,g=x+1,E=0,D=0;function z(m){for(;E>=m;)t[e++]=D&255,D>>=8,E-=8,e===i+256&&(t[i]=255,i=e++)}function H(m){D|=m<<E,E+=g,z(8)}var G=s[0]&u,R={};H(f);for(var M=1,T=s.length;M<T;++M){var S=s[M]&u,I=G<<8|S,w=R[I];if(w===void 0){for(D|=G<<E,E+=g;E>=8;)t[e++]=D&255,D>>=8,E-=8,e===i+256&&(t[i]=255,i=e++);b===4096?(H(f),b=d+1,g=x+1,R={}):(b>=1<<g&&++g,R[I]=b++),G=S}else G=w}return H(G),H(d),z(1),i+1===e?t[i]=0:(t[i]=e-i-1,t[e++]=0),e}function Ut(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!==56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var x=t[e++]|t[e++]<<8,s=t[e++]|t[e++]<<8,i=t[e++],f=i>>7,u=i&7,d=1<<u+1,b=t[e++];t[e++];var g=null,E=null;f&&(g=e,E=d,e+=d*3);var D=!0,z=[],H=0,G=null,R=0,M=null;for(this.width=x,this.height=s;D&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,M=t[e++]|t[e++]<<8,e++;else for(e+=12;;){var T=t[e++];if(!(T>=0))throw Error("Invalid block size");if(T===0)break;e+=T}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var S=t[e++];H=t[e++]|t[e++]<<8,G=t[e++],S&1||(G=null),R=S>>2&7,e++;break;case 254:for(;;){var T=t[e++];if(!(T>=0))throw Error("Invalid block size");if(T===0)break;e+=T}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var I=t[e++]|t[e++]<<8,w=t[e++]|t[e++]<<8,m=t[e++]|t[e++]<<8,C=t[e++]|t[e++]<<8,c=t[e++],A=c>>7,a=c>>6&1,o=c&7,n=1<<o+1,r=g,l=E,p=!1;if(A){var p=!0;r=e,l=n,e+=n*3}var v=e;for(e++;;){var T=t[e++];if(!(T>=0))throw Error("Invalid block size");if(T===0)break;e+=T}z.push({x:I,y:w,width:m,height:C,has_local_palette:p,palette_offset:r,palette_size:l,data_offset:v,data_length:e-v,transparent_index:G,interlaced:!!a,delay:H,disposal:R});break;case 59:D=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return z.length},this.loopCount=function(){return M},this.frameInfo=function(h){if(h<0||h>=z.length)throw new Error("Frame index out of range.");return z[h]},this.decodeAndBlitFrameBGRA=function(h,k){var y=this.frameInfo(h),F=y.width*y.height,O=new Uint8Array(F);ht(t,y.data_offset,O,F);var L=y.palette_offset,j=y.transparent_index;j===null&&(j=256);var V=y.width,_=x-V,P=V,U=(y.y*x+y.x)*4,B=((y.y+y.height)*x+y.x)*4,W=U,N=_*4;y.interlaced===!0&&(N+=x*4*7);for(var $=8,X=0,q=O.length;X<q;++X){var Q=O[X];if(P===0&&(W+=N,P=V,W>=B&&(N=_*4+x*4*($-1),W=U+(V+_)*($<<1),$>>=1)),Q===j)W+=4;else{var Z=t[L+Q*3],he=t[L+Q*3+1],ue=t[L+Q*3+2];k[W++]=ue,k[W++]=he,k[W++]=Z,k[W++]=255}--P}},this.decodeAndBlitFrameRGBA=function(h,k){var y=this.frameInfo(h),F=y.width*y.height,O=new Uint8Array(F);ht(t,y.data_offset,O,F);var L=y.palette_offset,j=y.transparent_index;j===null&&(j=256);var V=y.width,_=x-V,P=V,U=(y.y*x+y.x)*4,B=((y.y+y.height)*x+y.x)*4,W=U,N=_*4;y.interlaced===!0&&(N+=x*4*7);for(var $=8,X=0,q=O.length;X<q;++X){var Q=O[X];if(P===0&&(W+=N,P=V,W>=B&&(N=_*4+x*4*($-1),W=U+(V+_)*($<<1),$>>=1)),Q===j)W+=4;else{var Z=t[L+Q*3],he=t[L+Q*3+1],ue=t[L+Q*3+2];k[W++]=Z,k[W++]=he,k[W++]=ue,k[W++]=255}--P}}}function ht(t,e,x,s){for(var i=t[e++],f=1<<i,u=f+1,d=u+1,b=i+1,g=(1<<b)-1,E=0,D=0,z=0,H=t[e++],G=new Int32Array(4096),R=null;;){for(;E<16&&H!==0;)D|=t[e++]<<E,E+=8,H===1?H=t[e++]:--H;if(E<b)break;var M=D&g;if(D>>=b,E-=b,M===f){d=u+1,b=i+1,g=(1<<b)-1,R=null;continue}else if(M===u)break;for(var T=M<d?M:R,S=0,I=T;I>f;)I=G[I]>>8,++S;var w=I,m=z+S+(T!==M?1:0);if(m>s){console.log("Warning, gif stream longer than expected.");return}x[z++]=w,z+=S;var C=z;for(T!==M&&(x[z++]=w),I=T;S--;)I=G[I],x[--C]=I&255,I>>=8;R!==null&&d<4096&&(G[d++]=R<<8|w,d>=g+1&&b<12&&(++b,g=g<<1|1)),R=M}return z!==s&&console.log("Warning, gif stream shorter than expected."),x}try{Ue.GifWriter=Lt,Ue.GifReader=Ut}catch{}});var mt=ge((dt,Pe)=>{"use strict";(function(){function t(a){if(a=a||{},this.method=a.method||2,this.colors=a.colors||256,this.initColors=a.initColors||4096,this.initDist=a.initDist||.01,this.distIncr=a.distIncr||.005,this.hueGroups=a.hueGroups||10,this.satGroups=a.satGroups||10,this.lumGroups=a.lumGroups||10,this.minHueCols=a.minHueCols||0,this.hueStats=this.minHueCols?new e(this.hueGroups,this.minHueCols):null,this.boxSize=a.boxSize||[64,64],this.boxPxls=a.boxPxls||2,this.palLocked=!1,this.dithKern=a.dithKern||null,this.dithSerp=a.dithSerp||!1,this.dithDelta=a.dithDelta||0,this.histogram={},this.idxrgb=a.palette?a.palette.slice(0):[],this.idxi32=[],this.i32idx={},this.i32rgb={},this.useCache=a.useCache!==!1,this.cacheFreq=a.cacheFreq||10,this.reIndex=a.reIndex||this.idxrgb.length==0,this.colorDist=a.colorDist=="manhattan"?z:E,this.idxrgb.length>0){var o=this;this.idxrgb.forEach(function(n,r){var l=(-16777216|n[2]<<16|n[1]<<8|n[0])>>>0;o.idxi32[r]=l,o.i32idx[l]=r,o.i32rgb[l]=n})}}t.prototype.sample=function(o,n){if(this.palLocked)throw"Cannot sample additional images, palette already assembled.";var r=m(o,n);switch(this.method){case 1:this.colorStats1D(r.buf32);break;case 2:this.colorStats2D(r.buf32,r.width);break}},t.prototype.reduce=function(o,n,r,l){if(this.palLocked||this.buildPal(),r=r||this.dithKern,l=typeof l<"u"?l:this.dithSerp,n=n||1,r)var p=this.dither(o,r,l);else for(var v=m(o),h=v.buf32,k=h.length,p=new Uint32Array(k),y=0;y<k;y++){var F=h[y];p[y]=this.nearestColor(F)}if(n==1)return new Uint8Array(p.buffer);if(n==2){for(var O=[],k=p.length,y=0;y<k;y++){var F=p[y];O[y]=this.i32idx[F]}return O}},t.prototype.dither=function(a,o,n){var r={FloydSteinberg:[[.4375,1,0],[.1875,-1,1],[.3125,0,1],[.0625,1,1]],FalseFloydSteinberg:[[.375,1,0],[.375,0,1],[.25,1,1]],Stucki:[[.19047619047619047,1,0],[.09523809523809523,2,0],[.047619047619047616,-2,1],[.09523809523809523,-1,1],[.19047619047619047,0,1],[.09523809523809523,1,1],[.047619047619047616,2,1],[.023809523809523808,-2,2],[.047619047619047616,-1,2],[.09523809523809523,0,2],[.047619047619047616,1,2],[.023809523809523808,2,2]],Atkinson:[[.125,1,0],[.125,2,0],[.125,-1,1],[.125,0,1],[.125,1,1],[.125,0,2]],Jarvis:[[.14583333333333334,1,0],[.10416666666666667,2,0],[.0625,-2,1],[.10416666666666667,-1,1],[.14583333333333334,0,1],[.10416666666666667,1,1],[.0625,2,1],[.020833333333333332,-2,2],[.0625,-1,2],[.10416666666666667,0,2],[.0625,1,2],[.020833333333333332,2,2]],Burkes:[[.25,1,0],[.125,2,0],[.0625,-2,1],[.125,-1,1],[.25,0,1],[.125,1,1],[.0625,2,1]],Sierra:[[.15625,1,0],[.09375,2,0],[.0625,-2,1],[.125,-1,1],[.15625,0,1],[.125,1,1],[.0625,2,1],[.0625,-1,2],[.09375,0,2],[.0625,1,2]],TwoSierra:[[.25,1,0],[.1875,2,0],[.0625,-2,1],[.125,-1,1],[.1875,0,1],[.125,1,1],[.0625,2,1]],SierraLite:[[.5,1,0],[.25,-1,1],[.25,0,1]]};if(!o||!r[o])throw"Unknown dithering kernel: "+o;for(var l=r[o],p=m(a),v=p.buf32,h=p.width,k=p.height,y=v.length,F=n?-1:1,O=0;O<k;O++){n&&(F=F*-1);for(var L=O*h,j=F==1?0:h-1,V=F==1?h:0;j!==V;j+=F){var _=L+j,P=v[_],U=P&255,B=(P&65280)>>8,W=(P&16711680)>>16,N=this.nearestColor(P),$=N&255,X=(N&65280)>>8,q=(N&16711680)>>16;if(v[_]=255<<24|q<<16|X<<8|$,this.dithDelta){var Q=this.colorDist([U,B,W],[$,X,q]);if(Q<this.dithDelta)continue}for(var Z=U-$,he=B-X,ue=W-q,fe=F==1?0:l.length-1,wt=F==1?l.length:0;fe!==wt;fe+=F){var Te=l[fe][1]*F,Oe=l[fe][2],xt=Oe*h;if(Te+j>=0&&Te+j<h&&Oe+O>=0&&Oe+O<k){var De=l[fe][0],ve=_+(xt+Te),yt=v[ve]&255,Ct=(v[ve]&65280)>>8,_t=(v[ve]&16711680)>>16,bt=Math.max(0,Math.min(255,yt+Z*De)),Et=Math.max(0,Math.min(255,Ct+he*De)),kt=Math.max(0,Math.min(255,_t+ue*De));v[ve]=255<<24|kt<<16|Et<<8|bt}}}}return v},t.prototype.buildPal=function(o){if(!(this.palLocked||this.idxrgb.length>0&&this.idxrgb.length<=this.colors)){var n=this.histogram,r=A(n,!0);if(r.length==0)throw"Nothing has been sampled, palette cannot be built.";switch(this.method){case 1:for(var l=this.initColors,p=r[l-1],v=n[p],y=r.slice(0,l),h=l,k=r.length;h<k&&n[r[h]]==v;)y.push(r[h++]);this.hueStats&&this.hueStats.inject(y);break;case 2:var y=r;break}y=y.map(function(F){return+F}),this.reducePal(y),!o&&this.reIndex&&this.sortPal(),this.useCache&&this.cacheHistogram(y),this.palLocked=!0}},t.prototype.palette=function(o,n){return this.buildPal(n),o?this.idxrgb:new Uint8Array(new Uint32Array(this.idxi32).buffer)},t.prototype.prunePal=function(o){for(var n,r=0;r<this.idxrgb.length;r++)o[r]||(n=this.idxi32[r],this.idxrgb[r]=null,this.idxi32[r]=null,delete this.i32idx[n]);if(this.reIndex){for(var l=[],p=[],v={},r=0,h=0;r<this.idxrgb.length;r++)this.idxrgb[r]&&(n=this.idxi32[r],l[h]=this.idxrgb[r],v[n]=h,p[h]=n,h++);this.idxrgb=l,this.idxi32=p,this.i32idx=v}},t.prototype.reducePal=function(o){if(this.idxrgb.length>this.colors){for(var n=o.length,r={},l=0,p,v=!1,h=0;h<n;h++)l==this.colors&&!v&&(this.prunePal(r),v=!0),p=this.nearestIndex(o[h]),l<this.colors&&!r[p]&&(r[p]=!0,l++);v||(this.prunePal(r),v=!0)}else{var k=o.map(function(N){return[N&255,(N&65280)>>8,(N&16711680)>>16]}),n=k.length,y=n,F=this.initDist;if(y>this.colors){for(;y>this.colors;){for(var O=[],h=0;h<n;h++){var L=k[h],j=o[h];if(L)for(var V=h+1;V<n;V++){var _=k[V],P=o[V];if(_){var U=this.colorDist(L,_);U<F&&(O.push([V,_,P,U]),delete k[V],y--)}}}F+=y>this.colors*3?this.initDist:this.distIncr}if(y<this.colors){S.call(O,function(N,$){return $[3]-N[3]});for(var B=0;y<this.colors;)k[O[B][0]]=O[B][1],y++,B++}}for(var n=k.length,h=0;h<n;h++)k[h]&&(this.idxrgb.push(k[h]),this.idxi32.push(o[h]),this.i32idx[o[h]]=this.idxi32.length-1,this.i32rgb[o[h]]=k[h])}},t.prototype.colorStats1D=function(o){for(var n=this.histogram,r=0,l,p=o.length,v=0;v<p;v++)l=o[v],(l&4278190080)>>24&&(this.hueStats&&this.hueStats.check(l),l in n?n[l]++:n[l]=1)},t.prototype.colorStats2D=function(o,n){var r=this.boxSize[0],l=this.boxSize[1],p=r*l,v=C(n,o.length/n,r,l),h=this.histogram,k=this;v.forEach(function(y){var F=Math.max(Math.round(y.w*y.h/p)*k.boxPxls,2),O={},L;c(y,n,function(j){L=o[j],(L&4278190080)>>24&&(k.hueStats&&k.hueStats.check(L),L in h?h[L]++:L in O?++O[L]>=F&&(h[L]=O[L]):O[L]=1)})}),this.hueStats&&this.hueStats.inject(h)},t.prototype.sortPal=function(){var o=this;this.idxi32.sort(function(n,r){var l=o.i32idx[n],p=o.i32idx[r],v=o.idxrgb[l],h=o.idxrgb[p],k=H(v[0],v[1],v[2]),y=H(h[0],h[1],h[2]),F=v[0]==v[1]&&v[1]==v[2]?-1:G(k.h,o.hueGroups),O=h[0]==h[1]&&h[1]==h[2]?-1:G(y.h,o.hueGroups),L=O-F;if(L)return-L;var j=+y.l.toFixed(2)-+k.l.toFixed(2);if(j)return-j;var V=+y.s.toFixed(2)-+k.s.toFixed(2);if(V)return-V}),this.idxi32.forEach(function(n,r){o.idxrgb[r]=o.i32rgb[n],o.i32idx[n]=r})},t.prototype.nearestColor=function(o){var n=this.nearestIndex(o);return n===null?0:this.idxi32[n]},t.prototype.nearestIndex=function(o){if(!((o&4278190080)>>24))return null;if(this.useCache&&""+o in this.i32idx)return this.i32idx[o];for(var n=1e3,r,l=[o&255,(o&65280)>>8,(o&16711680)>>16],p=this.idxrgb.length,v=0;v<p;v++)if(this.idxrgb[v]){var h=this.colorDist(l,this.idxrgb[v]);h<n&&(n=h,r=v)}return r},t.prototype.cacheHistogram=function(o){for(var n=0,r=o[n];n<o.length&&this.histogram[r]>=this.cacheFreq;r=o[n++])this.i32idx[r]=this.nearestIndex(r)};function e(a,o){this.numGroups=a,this.minCols=o,this.stats={};for(var n=-1;n<a;n++)this.stats[n]={num:0,cols:[]};this.groupsFull=0}e.prototype.check=function(o){this.groupsFull==this.numGroups+1&&(this.check=function(){});var n=o&255,r=(o&65280)>>8,l=(o&16711680)>>16,p=n==r&&r==l?-1:G(H(n,r,l).h,this.numGroups),v=this.stats[p],h=this.minCols;v.num++,!(v.num>h)&&(v.num==h&&this.groupsFull++,v.num<=h&&this.stats[p].cols.push(o))},e.prototype.inject=function(o){for(var n=-1;n<this.numGroups;n++)if(this.stats[n].num<=this.minCols)switch(T(o)){case"Array":this.stats[n].cols.forEach(function(r){o.indexOf(r)==-1&&o.push(r)});break;case"Object":this.stats[n].cols.forEach(function(r){o[r]?o[r]++:o[r]=1});break}};var x=.2126,s=.7152,i=.0722;function f(a,o,n){return Math.sqrt(x*a*a+s*o*o+i*n*n)}var u=255,d=255,b=255,g=Math.sqrt(x*u*u+s*d*d+i*b*b);function E(a,o){var n=o[0]-a[0],r=o[1]-a[1],l=o[2]-a[2];return Math.sqrt(x*n*n+s*r*r+i*l*l)/g}var D=x*u+s*d+i*b;function z(a,o){var n=Math.abs(o[0]-a[0]),r=Math.abs(o[1]-a[1]),l=Math.abs(o[2]-a[2]);return(x*n+s*r+i*l)/D}function H(a,o,n){var r,l,p,v,h,k;if(a/=255,o/=255,n/=255,r=Math.max(a,o,n),l=Math.min(a,o,n),h=(r+l)/2,r==l)p=v=0;else{switch(k=r-l,v=h>.5?k/(2-r-l):k/(r+l),r){case a:p=(o-n)/k+(o<n?6:0);break;case o:p=(n-a)/k+2;break;case n:p=(a-o)/k+4;break}p/=6}return{h:p,s:v,l:f(a,o,n)}}function G(a,o){var n=1/o,r=n/2;if(a>=1-r||a<=r)return 0;for(var l=1;l<o;l++){var p=l*n;if(a>=p-r&&a<=p+r)return l}}function R(a){return a}function M(a){return a}function T(a){return Object.prototype.toString.call(a).slice(8,-1)}var S=w()?Array.prototype.sort:I;function I(a){var o=T(this[0]);if(o=="Number"||o=="String"){for(var n={},r=this.length,l,p=0;p<r;p++)l=this[p],!(n[l]||n[l]===0)&&(n[l]=p);return this.sort(function(v,h){return a(v,h)||n[v]-n[h]})}else{var n=this.map(function(h){return h});return this.sort(function(h,k){return a(h,k)||n.indexOf(h)-n.indexOf(k)})}}function w(){var a="abcdefghijklmnopqrstuvwxyz";return a.split("").sort(function(o,n){return~~(a.indexOf(n)/2.3)-~~(a.indexOf(o)/2.3)}).join("")=="xyzvwtursopqmnklhijfgdeabc"}function m(a,o){var n,r,l,p,v,h;switch(T(a)){case"HTMLImageElement":n=document.createElement("canvas"),n.width=a.naturalWidth,n.height=a.naturalHeight,r=n.getContext("2d"),r.drawImage(a,0,0);case"Canvas":case"HTMLCanvasElement":n=n||a,r=r||n.getContext("2d");case"CanvasRenderingContext2D":r=r||a,n=n||r.canvas,l=r.getImageData(0,0,n.width,n.height);case"ImageData":l=l||a,o=l.width,T(l.data)=="CanvasPixelArray"?p=new Uint8Array(l.data):p=l.data;case"Array":case"CanvasPixelArray":p=p||new Uint8Array(a);case"Uint8Array":case"Uint8ClampedArray":p=p||a,v=new Uint32Array(p.buffer);case"Uint32Array":v=v||a,p=p||new Uint8Array(v.buffer),o=o||v.length,h=v.length/o}return{can:n,ctx:r,imgd:l,buf8:p,buf32:v,width:o,height:h}}function C(a,o,n,r){for(var l=~~(a/n),p=a%n,v=~~(o/r),h=o%r,k=a-p,y=o-h,F=[],O=0;O<o;O+=r)for(var L=0;L<a;L+=n)F.push({x:L,y:O,w:L==k?p:n,h:O==y?h:r});return F}function c(a,o,n){var r=a,l=r.y*o+r.x,p=(r.y+r.h-1)*o+(r.x+r.w-1),v=0,h=o-r.w+1,k=l;do n.call(this,k),k+=++v%r.w==0?h:1;while(k<=p)}function A(a,o){var n=[];for(var r in a)n.push(r);return S.call(n,function(l,p){return o?a[p]-a[l]:a[l]-a[p]})}this.RgbQuant=t,typeof Pe<"u"&&Pe.exports&&(Pe.exports=t)}).call(dt)});var nt=[{title:"HTML - Hello World",code:"<p> Hello World </p>"}];var rt=[{title:"JS - Hello World",code:`function display() {
	console.log('hello world'); 
}`}];var it=["html","javascript"];var At={html:nt,javascript:rt},$t=(()=>{let e=class e{getRandomExample(s){let i=s==="auto"?this.randomIn(it):s,f=this.randomIn(At[i]);return He({},f)}randomIn(s){let i=Math.floor(Math.random()*s.length);return s.at(i)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Jt=(()=>{let e=class e{constructor(s){this.router=s}updateQuery(s){this.router.navigate([],{queryParams:s,queryParamsHandling:"merge"})}};e.\u0275fac=function(i){return new(i||e)(We(et))},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ot=(()=>{let e=class e{constructor(s){this.elementReference=s,this.hasChange=new Y}ngAfterViewInit(){this.observer=new MutationObserver(()=>this.hasChange.emit());let s={childList:!0,subtree:!0};this.observer.observe(this.elementReference.nativeElement,s)}ngOnDestroy(){this.observer.disconnect()}};e.\u0275fac=function(i){return new(i||e)(ye(xe))},e.\u0275dir=je({type:e,selectors:[["","hasChange",""]],outputs:{hasChange:"hasChange"},standalone:!0});let t=e;return t})();var ke=class{get shiftPress(){return this.keyboardEvent.shiftKey}get isTabulation(){return this.key==="Tab"}get isSimpleQuote(){return this.key==="'"}get isDoubleQuote(){return this.key==='"'}get isOpenParenthesis(){return this.key==="("}get isOpenCurlyBracket(){return this.key==="{"}get isOpenBracket(){return this.key==="["}get isOpenChevron(){return this.key==="<"}get isBackspace(){return this.key==="Backspace"}get isDelete(){return this.key==="DELETE"}get value(){return this.key}get key(){return this.keyboardEvent.key}constructor(e){this.keyboardEvent=e}is(e){return this.key===e}preventDefault(){this.keyboardEvent.preventDefault()}};var Ft=t=>({color:t}),at=(()=>{let e=class e{constructor(){this.editable=!0,this.titleChange=new Y}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=ae({type:e,selectors:[["app-title-bar"]],inputs:{theme:"theme",title:"title",editable:"editable"},outputs:{titleChange:"titleChange"},standalone:!0,features:[le],decls:7,vars:5,consts:[[1,"window-state"],[1,"window-action","window-close"],[1,"window-action","window-minimize"],[1,"window-action","window-maximize"],[1,"window-title",3,"ngStyle","input"],["snippetTitle",""]],template:function(i,f){if(i&1){let u=_e();te(0,"div",0),Ce(1,"div",1)(2,"div",2)(3,"div",3),K(),te(4,"h2",4,5),ne("input",function(){re(u);let b=de(5);return ie(f.titleChange.emit(b.innerText))}),se(6),K()}i&2&&(J(4),ee("ngStyle",me(3,Ft,f.theme.titleColor)),Ne("contenteditable",f.editable),J(2),Ze(" ",f.title,`
`))},dependencies:[ce,be],styles:["[_nghost-%COMP%]{display:flex;justify-content:space-between;background-color:var(--primary-dark);padding:var(--padding-2) var(--padding-4)}.window-state[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--padding-1)}.window-action[_ngcontent-%COMP%]{width:12px;height:12px;border:1px solid black;border-radius:50%}.window-close[_ngcontent-%COMP%]{background-color:red;border-color:brown}.window-minimize[_ngcontent-%COMP%]{background-color:#ff0;border-color:orange}.window-maximize[_ngcontent-%COMP%]{background-color:#32cd32;border-color:green}.window-title[_ngcontent-%COMP%]{overflow:hidden;display:-webkit-box;-webkit-line-clamp:1;line-clamp:1;-webkit-box-orient:vertical;text-overflow:ellipsis;outline:0px solid transparent;margin:0;min-width:20px}"],changeDetection:0});let t=e;return t})();var Tt=t=>({"caret-color":t});function Ot(t,e){if(t&1){let x=_e();te(0,"div",3)(1,"code",4),ne("hasChange",function(){re(x);let i=oe();return ie(i.codeTagHasChange())})("highlighted",function(i){re(x);let f=oe();return ie(f.onCodeHighlight(i))}),K(),te(2,"textarea",5,6),ne("keydown",function(i){re(x);let f=de(3),u=oe();return ie(u.onKeyDown(f,i))})("input",function(){re(x);let i=de(3),f=oe();return ie(f.onCodeModify(i))}),se(4),K()()}if(t&2){let x=oe();J(),ee("highlight",x.code),J(),ee("rows",x.codeRows)("cols",x.windowConfiguration.numberColumn)("ngStyle",me(5,Tt,x._theme.caretColor)),J(2),Xe(x.code)}}function Dt(t,e){if(t&1&&Ce(0,"code",7),t&2){let x=oe();ee("highlight",x.code)}}var Rt=t=>({width:"64ch","border-radius":t}),st=(()=>{let e=class e{constructor(){this.title=e.defaultTitle,this.domHasChange=new Y,this.titleChange=new Y,this.codeHasChange=new Y,this.lastCharacterInsert=void 0}set theme(s){this._theme=s,this.tabSize=s.tabSize,this.padding=s.padding,this.background=s.background}get codeRows(){return this.windowConfiguration.numberRow??this.code.split(`
`).length}updateTitle(s){s===""&&(this.title=s=e.defaultTitle),this.titleChange.emit(s)}codeTagHasChange(){this.domHasChange.next()}onKeyDown(s,i){let f=new ke(i);this.lastCharacterInsert&&f.is(this.lastCharacterInsert)?(this.moveSelection(s,1),this.lastCharacterInsert=void 0,f.preventDefault()):f.isTabulation?(f.shiftPress?this.onRemoveTabulationOnCurrentLine(s):this.insertCharacterInTextArea(s,"	",1),f.preventDefault()):f.isSimpleQuote?this.insertCharacterInTextArea(s,"'"):f.isDoubleQuote?this.insertCharacterInTextArea(s,'"'):f.isOpenParenthesis?this.insertCharacterInTextArea(s,")"):f.isOpenCurlyBracket?this.insertCharacterInTextArea(s,"}"):f.isOpenBracket?this.insertCharacterInTextArea(s,"}"):f.isBackspace?(this.onRemoveCharacter(s),this.lastCharacterInsert=void 0):this.lastCharacterInsert=void 0}onCodeModify(s){this.codeHasChange.emit({value:s.value,position:s.selectionEnd})}onCodeHighlight(s){s.language&&console.log(s.language)}insertCharacterInTextArea(s,i,f=0){let{value:u,selectionEnd:d}=s,b=u.substring(0,d),g=u.substring(d);s.value=`${b}${i}${g}`,s.selectionStart=d+f,s.selectionEnd=d+f,this.lastCharacterInsert=i,this.code=s.value,this.onCodeModify(s)}onRemoveCharacter(s){if(!this.lastCharacterInsert)return;let i=s.value[s.selectionEnd-1];this.characterInCodeInsertionList(i)&&this.removeCharacterInTextArea(s,s.selectionEnd),this.code=s.value,this.onCodeModify(s)}removeCharacterInTextArea(s,i){let{value:f,selectionEnd:u}=s,d=f.substring(0,i),b=f.substring(i+1);s.value=`${d}${b}`,s.selectionStart=u,s.selectionEnd=u}onRemoveTabulationOnCurrentLine(s){let{value:i,selectionEnd:f}=s,u=i.split(`
`),d=i.substring(0,f).split(`
`).length;if(!u[d-1].includes("	"))return;u[d-1]=u[d-1].replace("	",""),s.value=u.join(`
`);let g=s.value[f-1]===`
`?0:1;s.selectionStart=f-g,s.selectionEnd=f-g,this.code=s.value,this.onCodeModify(s)}moveSelection(s,i){s.selectionStart=s.selectionStart+i,s.selectionEnd=s.selectionEnd+i}characterInCodeInsertionList(s){return["'",'"',"(","[","{","	"].includes(s)}};e.defaultTitle="Default Title",e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=ae({type:e,selectors:[["app-window"]],hostVars:6,hostBindings:function(i,f){i&2&&Qe("padding",f.padding)("tab-size",f.tabSize)("background",f.background)},inputs:{code:"code",windowConfiguration:"windowConfiguration",theme:"theme",title:"title"},outputs:{domHasChange:"domHasChange",titleChange:"titleChange",codeHasChange:"codeHasChange"},standalone:!0,features:[le],decls:4,vars:7,consts:[[1,"window",3,"ngStyle"],[3,"theme","title","editable","titleChange"],["class","stack-child code-container"],[1,"stack-child","code-container"],[1,"code",3,"highlight","hasChange","highlighted"],[1,"textarea-code","textarea-fixed",3,"rows","cols","ngStyle","keydown","input"],["textArea",""],[1,"code","code-preview",3,"highlight"]],template:function(i,f){i&1&&(te(0,"div",0)(1,"app-title-bar",1),ne("titleChange",function(d){return f.updateTitle(d)}),K(),$e(2,Ot,5,7,"div",2)(3,Dt,1,1),K()),i&2&&(ee("ngStyle",me(5,Rt,f._theme.borderRadius)),J(),ee("theme",f._theme)("title",f.title)("editable",f.windowConfiguration.isEditable),J(),qe(2,f.windowConfiguration.isEditable?2:3))},dependencies:[at,ot,tt,ce,be],styles:[".window[_ngcontent-%COMP%]{display:block;overflow:hidden}.code[_ngcontent-%COMP%], .textarea-code[_ngcontent-%COMP%]{display:inline-block;font-size:var(--font-size, 16px);white-space:pre;text-wrap:wrap;padding:var(--padding-4)}.code-container[_ngcontent-%COMP%]{position:relative;--padding: 16px;--font-size: 16px}.code-container[_ngcontent-%COMP%]   .caret[_ngcontent-%COMP%]{position:absolute;font-size:var(--font-size);top:calc(var(--padding));left:calc(var(--padding) + 2ch);width:1ch;height:calc(var(--font-size) * 1.2);background-color:#f009}.textarea-code[_ngcontent-%COMP%]{outline:0px solid transparent;-webkit-text-fill-color:transparent;background-color:transparent;opacity:.5;border:0}.textarea-fixed[_ngcontent-%COMP%]{resize:none}[_ngcontent-%COMP%]:has(code[ng-reflect-line-numbers=true])   textarea[_ngcontent-%COMP%]{padding-left:calc(var(--code-size) + var(--code-space) + var(--border-size))}.code-preview[_ngcontent-%COMP%]{width:100%}"],changeDetection:0});let t=e;return t})();var vt=Re(ct());var ft=Re(ut()),Se=class{get asBlob(){return new Blob([this.buffer.subarray(0,this.writer.end())],{type:"image/gif"})}constructor({width:e,height:x,numberOfFrames:s}){this.width=e,this.height=x,this.buffer=new Uint8Array(e*x*s),this.writer=new ft.GifWriter(this.buffer,e,x,{loop:void 0})}addFrame(e,x){let s=e.paletteIndex,i=e.pixelList,f={palette:s,delay:(x?.delayInMs??100)/10};this.writer.addFrame(0,0,this.width,this.height,i,f)}};var Ie=class t{static from(e){return new t(e)}constructor(e){this.color=e}toRgb(e=1){if(typeof this.color=="string")throw new Error("Not supported yet for string color");let[x,s,i]=this.color;return{r:Math.floor(x*(1/e))*e,g:Math.floor(s*(1/e))*e,b:Math.floor(i*(1/e))*e}}toUint8(){if(typeof this.color=="string")throw new Error("Not supported yet for string color");let{r:e,g:x,b:s}=this.toRgb(10);return e<<16|x<<8|s<<0}};var pt=Re(mt()),Ae=class{get paletteIndex(){return this.rgbQuantizer.palette(!0).map(e=>Ie.from(e).toUint8())}get pixelList(){return this.rgbQuantizer.reduce(this._pixelList,2)}constructor(e,x=256){this.rgbQuantizer=new pt.default({colors:x,useCache:!0,cacheFreq:20}),this.rgbQuantizer.sample(e),this._pixelList=e}};var Me=class t{static generate(e){new t(e).saveAnimation()}constructor(e){this.dom=e.dom,this.animation=e.animation,this.onStart=e.onStart,this.onFinish=e.onFinish,this.loadFrame=e.loadFrame,this.gif=new Se({width:e.width,height:e.height,numberOfFrames:e.animation.numberOfFrame}),this.nextFrameLoadedSubscription=e.frameLoaded.subscribe(()=>this.saveFrame(e.frameOptions))}saveAnimation(){this.animation.hasNoFrame||(this.animation.start(),this.onStart?.(),this.loadNextFrame())}loadNextFrame(){let e=this.animation.nextFrame();if(!e){this.downloadGif(),this.onFinish?.(),this.nextFrameLoadedSubscription.unsubscribe();return}this.loadFrame(e)}saveFrame(e){let x=Ge(vt.default.toPixelData(this.dom)).subscribe(s=>{this.gif.addFrame(new Ae(s),e),this.loadNextFrame(),x.unsubscribe()})}downloadGif(){let e=document.createElement("a");e.href=URL.createObjectURL(this.gif.asBlob),e.download="animation.gif",e.click()}};var Ht=["codeContainer"],jn=(()=>{let e=class e{set codeAnimation(s){this._codeAnimation=s,this.codeConfiguration={numberRow:s.nbMaxRow,numberColumn:64,isEditable:!0,hideTextSelection:!0}}constructor(s){this.changeDetectorReference=s,this.delayInMs=100,this.onRecordFinish=new Y,this.code="",this.codeChangeFromAnimation$=new ze}ngAfterViewInit(){this.saveCodeAnimation()}domHasChange(){this._codeAnimation.hasStart&&this.codeChangeFromAnimation$.next()}saveCodeAnimation(){this._codeAnimation.hasNoFrame||Me.generate({animation:this._codeAnimation,width:this.codeContainer.nativeElement.clientWidth,height:this.codeContainer.nativeElement.clientHeight,dom:this.codeContainer.nativeElement,scaleFactor:2,frameLoaded:this.codeChangeFromAnimation$.asObservable(),frameOptions:{delayInMs:this.delayInMs},loadFrame:s=>{if(this.isAlreadyLoad(s)){this.codeChangeFromAnimation$.next();return}this.code=s.code,this.changeDetectorReference.detectChanges()},onFinish:()=>{this.codeConfiguration.hideTextSelection=!1,this.changeDetectorReference.detectChanges(),this.onRecordFinish.emit(null)}})}isAlreadyLoad(s){return this.code===s.code}};e.\u0275fac=function(i){return new(i||e)(ye(Ve))},e.\u0275cmp=ae({type:e,selectors:[["app-code-recorder"]],viewQuery:function(i,f){if(i&1&&Ke(Ht,5,xe),i&2){let u;Je(u=Ye())&&(f.codeContainer=u.first)}},inputs:{title:"title",delayInMs:"delayInMs",theme:"theme",codeAnimation:"codeAnimation"},outputs:{onRecordFinish:"onRecordFinish"},standalone:!0,features:[le],decls:5,vars:4,consts:[[1,"stack-child","code-editor"],[1,"no-animation",3,"title","code","theme","windowConfiguration","domHasChange"],["codeContainer",""],[1,"spinner"]],template:function(i,f){i&1&&(te(0,"div",0)(1,"app-window",1,2),ne("domHasChange",function(){return f.domHasChange()}),K(),te(3,"p",3),se(4,"Render frames"),K()()),i&2&&(J(),ee("title",f.title)("code",f.code)("theme",f.theme)("windowConfiguration",f.codeConfiguration))},dependencies:[ce,st],styles:[".spinner[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;color:var(--text-background);background-color:var(--background);width:100%;z-index:1000}"],changeDetection:0});let t=e;return t})();var Fe=class{constructor(){this._frameList=[]}get hasNoFrame(){return this._frameList.length<=0}get numberOfFrame(){return this._frameList.length}get hasStart(){return this.currentFrameIndex!==void 0}get currentFrame(){if(this.currentFrameIndex!==void 0)return this._frameList.at(this.currentFrameIndex)}get frameList(){return this._frameList}start(){this.currentFrameIndex=-1}stop(){this.currentFrameIndex=void 0}nextFrame(){if(this.currentFrameIndex===void 0)throw new Error("Can't get next frame");let e=this.currentFrameIndex+1;if(e>=this._frameList.length){this.stop();return}return this.currentFrameIndex=e,this.currentFrame}addFrame(e){this._frameList.push(e)}removeFrame(e){this._frameList.splice(e,1)}copy(){return new this.constructor}};var gt=class t extends Fe{get nbMaxRow(){return Math.max(...this._frameList.map(e=>t.nbRowForCode(e.code)))}static nbRowForCode(e){let x=1,s=0;return e.split("").forEach(i=>{i===`
`&&(x++,s=0),s++,s>64&&(x++,s=0)}),x}static fromCode(e,x){let s=new t,i="";s.addFrame({title:e,code:i,caretPosition:0});for(let f=0;f<x.length;f++)i+=x.charAt(f),s.addFrame({title:e,code:i,caretPosition:f+1});return s}};export{St as a,st as b,jn as c,gt as d,$t as e,Jt as f};
