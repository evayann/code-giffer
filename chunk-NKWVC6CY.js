import"./chunk-PDN5QK7T.js";import{a as P,b as A,c as F,d as R,e as D,f as b,g as V}from"./chunk-73XXCCGC.js";import{$ as T,Ba as H,Fa as f,G as _,K as p,L as h,_ as s,_a as w,a as S,aa as v,da as I,fa as g,ja as x,ka as E,kb as M,oa as c,pa as l,ta as y,wa as u,xa as d}from"./chunk-Z2EWHTV7.js";import{d as O}from"./chunk-VHCA6YAO.js";var r=O(P());function U(a,n){if(a&1){let i=y();c(0,"app-window",2),u("codeHasChange",function(t){p(i);let o=d();return h(o.updateCode(t.value))})("titleChange",function(t){p(i);let o=d();return h(o.updateTitle(t))})("languageDetected",function(t){p(i);let o=d();return h(o.updateLanguage(t))}),l()}if(a&2){let i=d();g("code",i.code)("title",i.title)("theme",i.theme)("language",i.languageSelected)("windowConfiguration",i.codeConfiguration)}}function k(a,n){if(a&1){let i=y();c(0,"app-code-recorder",3),u("onRecordFinish",function(){p(i);let t=d();return h(t.finishRecord())}),l()}if(a&2){let i=d(),e;g("delayInMs",i.delayInMs)("title",i.title)("theme",i.theme)("language",(e=i.languageSelected)!==null&&e!==void 0?e:i.language)("codeAnimation",i.codeAnimation)}}var j=(()=>{let n=class n{constructor(){this.codeHasChange=new v,this.titleHasChange=new v,this.title="Snippet title",this.code="",this.isRecording=!1,this.codeConfiguration={numberColumn:64,isEditable:!0,hideTextSelection:!1}}set initialCode(e){this.title=e.title,this.code=e.code}updateCode(e){this.code=e,this.codeHasChange.emit(e)}updateTitle(e){this.titleHasChange.emit(e)}updateLanguage(e){this.language=e}startRecord(){this.codeAnimation=R.fromCode(this.title,this.code),console.log(this.codeAnimation),this.isRecording=!0}finishRecord(){this.isRecording=!1}};n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=_({type:n,selectors:[["app-auto-code-editor"]],inputs:{delayInMs:"delayInMs",theme:"theme",languageSelected:"languageSelected",initialCode:"initialCode"},outputs:{codeHasChange:"codeHasChange",titleHasChange:"titleHasChange"},standalone:!0,features:[f],decls:4,vars:1,consts:[[3,"code","title","theme","language","windowConfiguration"],[3,"click"],[3,"code","title","theme","language","windowConfiguration","codeHasChange","titleChange","languageDetected"],[3,"delayInMs","title","theme","language","codeAnimation","onRecordFinish"]],template:function(t,o){t&1&&(x(0,U,1,5,"app-window",0)(1,k,1,5),c(2,"button",1),u("click",function(){return o.startRecord()}),H(3,"Animate my snippet !"),l()),t&2&&E(0,o.isRecording?1:0)},dependencies:[w,A,F],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:var(--space-3)}"],changeDetection:0});let a=n;return a})();var re=(()=>{let n=class n{set menuForm(e){this._menuForm=e,this.subscriptions.add(e?.valueChanges.subscribe(()=>{this.updateEditorTheme(),this.changeDetectorRef.detectChanges()}))}constructor(e,t,o,C,m){this.hljsLoader=e,this.placeholderCodeService=t,this.changeDetectorRef=o,this.codeEditorThemeService=C,this.urlService=m,this.subscriptions=new S}ngOnInit(){if(this.updateEditorTheme(),this.title===""&&this.code===""){this.initialCode=this.placeholderCodeService.getRandomExample("auto"),this.urlService.updateQuery({code:(0,r.compressToBase64)(this.initialCode.code),title:(0,r.compressToBase64)(this.initialCode.title)});return}this.initialCode={title:this.title,code:this.code}}ngOnDestroy(){this.subscriptions.unsubscribe()}updateCodeInUrl(e){this.urlService.updateQuery({code:(0,r.compressToBase64)(e)})}updateTitleInUrl(e){this.urlService.updateQuery({title:(0,r.compressToBase64)(e)})}updateEditorTheme(){this.hljsLoader.setTheme(this.codeEditorThemeService.editorOf(this._menuForm.themeName,this._menuForm.variant))}};n.\u0275fac=function(t){return new(t||n)(s(M),s(D),s(T),s(b),s(V))},n.\u0275cmp=_({type:n,selectors:[["app-auto-code-to-gif-page"]],inputs:{title:["title","title",e=>(0,r.decompressFromBase64)(e)],code:["code","code",e=>(0,r.decompressFromBase64)(e)],menuForm:"menuForm"},standalone:!0,features:[I,f],decls:1,vars:4,consts:[[3,"delayInMs","theme","languageSelected","initialCode","codeHasChange","titleHasChange"]],template:function(t,o){t&1&&(c(0,"app-auto-code-editor",0),u("codeHasChange",function(m){return o.updateCodeInUrl(m)})("titleHasChange",function(m){return o.updateTitleInUrl(m)}),l()),t&2&&g("delayInMs",o._menuForm.delayInMs)("theme",o._menuForm.theme)("languageSelected",o._menuForm.language)("initialCode",o.initialCode)},dependencies:[w,j],styles:["[_nghost-%COMP%]{display:flex;align-items:center;justify-content:center}app-auto-code-editor[_ngcontent-%COMP%]{padding:calc(var(--space-5) * 2) 0}"],changeDetection:0});let a=n;return a})();export{re as AutoCodeToGifPageComponent};
